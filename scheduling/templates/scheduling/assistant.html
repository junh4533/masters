{% extends 'scheduling/portal_template.html' %}
<!-- Links base.html as a HTML template -->
{% load static %}
{% load crispy_forms_tags %}

{% block content %}
{% if user.is_authenticated and user.user_type != "patient" or user.user_type != "doctor" %}
<!--check for login-->
<!-- Topbar -->
<div id="topbar">
    <h4>Welcome, Assistant</h4>
    <a href="{%url 'logout'%}" id="logout_icon"> Logout <span> <i class="fas fa-sign-out-alt"></i> </span> </a>
</div>

<div class="row">
    <div class="col-sm-2">
        <!-- Sidebar -->
        <div id="sidebar">
            <a href="appointments/">Appointments</a>
            <a href="patients/">Doctors</a>
            <a href="patients/">Patients</a>
            <a href="reports/">Reports</a>
            <a href="settings/">Setting</a>
        </div>

    </div>
    <div class="col-sm-10">
        <br>
        <!-- Main content -->
        <div class="row" id="preview_row">

            <div class="col-6" id="appointments">
                <h1>Upcoming Appointments</h1>

                <div class="container-fluid">
                    <table class="table table-dark table-striped">
                        <thead>
                            <tr>    
                                <th>Date</th>
                                <th>Timeslot</th>
                                <th>Doctor</th>
                                <th>Patient</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for appointment in appointments %}
                                <tr>
                                    <td>{{ appointment.date }}</td>
                                    <td>{{ appointment.get_timeslot_display }}</td>
                                    <td>{{ appointment.doctor }}</td>
                                    <td>{{ appointment.patient }}</td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>

            </div>

            <div class="col-6" id="chart">
                <div id="container"></div>
                <script src="https://code.highcharts.com/highcharts.src.js"></script>
                <script>
                    Highcharts.chart('container', {
                        chart:{
                            type:'column'
                        },
                        title:{
                            text:'Test Appointment Chart'
                        },
                    
                        xAxis:{
                            categories:{{categories|safe}},
                            color: 'green'
                        },
                        yAxis:{
                            title:{
                                text:'Number of appointment'
                            }
                        },
                        series: [{ 
                            name:'Appointments',
                            data:{{appointment_count}}
                        }],
                    });
                </script>
            </div>
        </div>
        <br>
        <div class="row" id="icon_row">

            <!-- Appointments -->
            <div class="col-2 icon_box" id="icon1">
                <a href="../appointments">
                    <span class="icon row-icon">
                        <i class="fas fa-calendar-alt"></i>
                    </span>
                </a>
                <div class="icon_description">Appointments</div>
            </div>

             <!-- Patients -->
            <div class="col-2 icon_box" id="icon2">
                <a href="../patients">
                    <span class="icon row-icon">
                        <i class="fas fa-users"></i>
                    </span>
                </a>
                <div class="icon_description">Patients</div>
            </div>

            <!-- Doctors -->
            <div class="col-2 icon_box" id="icon5">
                <a href="../doctors">
                    <span class="icon row-icon">
                        <i class="fas fa-user-md"></i>
                    </span>
                </a>
                <div class="icon_description">Doctors</div>
            </div>

             <!-- Reports -->
            <div class="col-2 icon_box" id="icon3">
                <a href="../reports">
                    <span class="icon row-icon">
                        <i class="fas fa-file"></i>
                    </span>
                </a>
                <div class="icon_description">Reports</div>
            </div>

            <!-- Settings -->
            <div class="col-2 icon_box" id="icon4">
                <a href="../settings">
                    <span class="icon row-icon">
                        <i class="fas fa-cogs"></i>
                    </span>
                </a>
                <div class="icon_description">Setting</div>
            </div>

        </div>

    </div>

</div>

{% else %}
{% url index %}
{% endif %}
{% endblock %}